!function(){function e(){var e=d.map(function(e,a){return d.length>0?"<button value="+a+" class='btn btn-default' name = "+e+">"+e+"</button>":void 0}).join("");$("#selectHolder").html(e)}function a(){var e=$("#form-name").val(),a=$("#view-container form");if(""!=$("#form-name-input").val()&&a.append("<h2>"+$("#form-name-input").val()+"</h2>"),$("#inputK").prop("checked")){a.append("<div class='form-group'></div>");var n=$("#view-container form .form-group:last");n.append("<lable class='control-label col-md-4'>"+e+"</lable>"),n.append("<div class='col-md-6'><input type="+$("#rule input:checked").attr("alt")+" class='form-control' ></div>");var s=$("#view-container form .form-group:last input");o(s)}else if($("#radioK").prop("checked")){a.append("<div class='radio-div'></div>");var c=$("form .radio-div:last");c.append("<lable class='control-label col-md-4'>"+e+"</lable>");for(var l=0;l<d.length;l++){c.append("<label class='radio-inline'></label>");var t=$("form .radio-inline:last");t.append("<input type='radio' name="+e+" value="+d[l]+">"+d[l])}}else if($("#checkboxK").prop("checked")){a.append("<div class='checkbox-div'></div>");var r=$("form .checkbox-div:last");r.append("<lable class='control-label col-md-4'>"+e+"</lable>");for(var l=0;l<d.length;l++){r.append("<label class='checkbox-inline'></label>");var i=$("form .checkbox-inline:last");i.append("<input type='checkbox' name="+e+" value="+d[l]+">"+d[l])}}else if($("#selectK").prop("checked")){a.append("<div class='select-div'></div>");var p=$("form .select-div:last");p.append("<lable class='control-label col-md-4'>"+e+"</lable>"),p.append("<div class='col-md-6'><select class='form-control'></select></div>");for(var f=$("form select:last"),l=0;l<d.length;l++)f.append("<option value="+d[l]+">"+d[l]+"</option>")}else if($("#textareaK").prop("checked")){a.append("<div class='textarea-div'></div>");var u=$("form .textarea-div:last");u.append("<lable class='control-label col-md-4'>"+e+"</lable>"),u.append("<div class='col-md-6'><textarea class='form-control' rows='3'></textarea></div>");var v=$("form .textarea-div:last textarea"),m=$("#areaMin").val(),h=$("#areaMax").val();""==m||""==h?console.log("the password is not selected!"):(v.blur(function(){(v.val().length<m||v.val().length>h)&&v.after("<span class='help-block' style='color: #a94442'>长度需要在"+m+"和"+h+"之间!</span>")}),v.focus(function(){v.next("span").remove()}))}$("#form-name-input").val(""),$("#view-container form .form-group,#view-container form .radio-div,#view-container form .checkbox-div,#view-container form .select-div,#view-container form .textarea-div").mouseover(function(){$(this).css("backgroundColor","#eee"),$(this).css("cursor","pointer"),$(this).append("<span class='glyphicon glyphicon-remove'></span>")}),$("#view-container form .form-group,#view-container form .radio-div,#view-container form .checkbox-div,#view-container form .select-div,#view-container form .textarea-div").mouseout(function(){$(this).css("backgroundColor","#fff"),$(this).css("cursor","default"),$(this).children(".glyphicon-remove:last").remove()})}function n(){return $("#must").prop("checked")?!0:!1}function o(e){$("#cellphone").prop("checked")?r(e):$("#mailbox").prop("checked")?i(e):$("#password").prop("checked")&&t(e),n()&&l(e),e.on("focus",function(){s(e)})}function s(e){e.parent().parent().attr("class","form-group"),e.parent().children("span").remove()}function c(e){e.parent().parent().attr("class","form-group has-success has-feedback"),e.after("<span class='sr-only'>(success)</span>").after("<span class='glyphicon glyphicon-ok form-control-feedback' ></span>")}function l(e){e.on("blur",function(){""==e.val()&&(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>该项不能为空,请重新输入!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>"))})}function t(e){var a=$("#areaMin").val(),n=$("#areaMax").val();e.blur(function(){""!=e.val()&&(e.val().length>n||e.val().length<a?(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>长度区间需在"+a+"到"+n+"之间!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>")):c(e))})}function r(e){var a=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/;e.blur(function(){""!=e.val()&&(a.test(e.val())?c(e):(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>请输入正确的手机号!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>")))})}function i(e){var a=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;e.blur(function(){""!=e.val()&&(""==e.val()?(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>该项不能为空,请重新输入!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>")):a.test(e.val())?c(e):(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>请输入正确的邮箱格式!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>")))})}function p(){var e=document.querySelector(".modal-body"),a=document.createRange();a.selectNode(e),window.getSelection().addRange(a);try{var n=document.execCommand("copy"),o=n?"successful":"unsuccessful";console.log("Copy email command was "+o)}catch(s){console.log("Oops, unable to copy")}window.getSelection().removeAllRanges()}$("#inputK").prop("checked",!0),$("#must").prop("checked",!0),$("#text").prop("checked",!0),$("#inputK").prop("checked")&&($("#selection").css("display","none"),$("#setLength").css("display","none")),$("#inputK").click(function(){$("#config").css("display","block"),$("#rule").css("display","block"),$("#selection").css("display","none"),$("#setLength").css("display","none")}),$("#radioK,#checkboxK,#selectK").click(function(){$("#config").css("display","block"),$("#rule").css("display","none"),$("#selection").css("display","block"),$("#setLength").css("display","none")}),$("#textareaK").click(function(){$("#config").css("display","block"),$("#rule").css("display","none"),$("#selection").css("display","none"),$("#setLength").css("display","block")}),$("#rule .radio").on("click","input",function(){$(this).is("#password")?$("#setLength").css("display","block"):$("#setLength").css("display","none")});var d=[];$("#setSelect").keyup(function(a){if(13==a.keyCode){var n=$("#setSelect").val().trim(),o=n.split(/[^0-9a-zA-Z\u4e00-\u9fa5]+/);d=d.concat(o),console.log(d),e()}}),$("#selectHolder").delegate("button","click",function(){$(this).remove(),d.splice($(this).value,1),console.log(d)}),$("#selectHolder").delegate("button","mouseover",function(){$(this).attr("class","btn btn-danger"),$(this).text("删除")}),$("#selectHolder").delegate("button","mouseleave",function(){$(this).attr("class","btn btn-default"),$(this).text($(this).attr("name"))}),$("#add").click(function(){a()}),$("#finished").click(function(){$(".modal-body").text($("#view-container .container").html()),$("#view-container .container").append("<div class='col-md-4 col-md-offset-4'><button class='btn btn-success' id='createFormCode' data-toggle='modal' data-target='#dialog'>一键生成表单代码</button></div>")}),$(".modal-footer button:last").click(function(){p()})}();