!function(){function e(){$("#inputK").prop("checked",!0),$("#must").prop("checked",!0),$("#text").prop("checked",!0),$("#inputK").prop("checked")&&($("#selection").css("display","none"),$("#setLength").css("display","none")),$("#inputK").click(function(){$("#config").css("display","block"),$("#rule").css("display","block"),$("#selection").css("display","none"),$("#setLength").css("display","none")}),$("#radioK,#checkboxK,#selectK").click(function(){$("#config").css("display","block"),$("#rule").css("display","none"),$("#selection").css("display","block"),$("#setLength").css("display","none")}),$("#textareaK").click(function(){$("#config").css("display","block"),$("#rule").css("display","none"),$("#selection").css("display","none"),$("#setLength").css("display","block")}),$("#rule .radio").on("click","input",function(){$(this).is("#password")?$("#setLength").css("display","block"):$("#setLength").css("display","none")})}function a(){var e=v.map(function(e,a){return v.length>0?"<button value="+a+" class='btn btn-default' name = "+e+">"+e+"</button>":void 0}).join("");$("#selectHolder").html(e)}function n(){var e=$("#form-name").val(),a=$("#view-container form");if(""!=$("#form-name-input").val()&&a.append("<h2>"+$("#form-name-input").val()+"</h2>"),$("#inputK").prop("checked")){a.append("<div class='form-group'></div>");var n=$("#view-container form .form-group:last");n.append("<lable class='control-label col-md-4'>"+e+"</lable>"),n.append("<div class='col-md-6'><input type="+$("#rule input:checked").attr("alt")+" class='form-control' ></div>");var l=$("#view-container form .form-group:last input");c(l),n.mouseenter(function(){o(n)}),n.mouseleave(function(){s(n)})}else if($("#radioK").prop("checked")){a.append("<div class='radio-div'></div>");var t=$("form .radio-div:last");t.append("<lable class='control-label col-md-4'>"+e+"</lable>"),t.append("<div class='col-md-6'></div>");for(var r=t.children(".col-md-6"),i=0;i<v.length;i++){r.append("<label class='radio-inline'></label>");var p=$("form .radio-inline:last");p.append("<input type='radio' name="+e+" value="+v[i]+">"+v[i])}t.mouseenter(function(){o(t)}),t.mouseleave(function(){s(t)})}else if($("#checkboxK").prop("checked")){a.append("<div class='checkbox-div'></div>");var d=$("form .checkbox-div:last");d.append("<lable class='control-label col-md-4'>"+e+"</lable>"),d.append("<div class='col-md-6'></div>");for(var f=d.children(".col-md-6"),i=0;i<v.length;i++){f.append("<label class='checkbox-inline'></label>");var u=$("form .checkbox-inline:last");u.append("<input type='checkbox' name="+e+" value="+v[i]+">"+v[i])}d.mouseenter(function(){o(d)}),d.mouseleave(function(){s(d)})}else if($("#selectK").prop("checked")){a.append("<div class='select-div'></div>");var m=$("form .select-div:last");m.append("<lable class='control-label col-md-4'>"+e+"</lable>"),m.append("<div class='col-md-6'><select class='form-control'></select></div>");for(var h=$("form select:last"),i=0;i<v.length;i++)h.append("<option value="+v[i]+">"+v[i]+"</option>");m.mouseenter(function(){o(m)}),m.mouseleave(function(){s(m)})}else if($("#textareaK").prop("checked")){a.append("<div class='textarea-div'></div>");var b=$("form .textarea-div:last");b.append("<lable class='control-label col-md-4'>"+e+"</lable>"),b.append("<div class='col-md-6'><textarea class='form-control' rows='3'></textarea></div>");var g=$("form .textarea-div:last textarea"),k=$("#areaMin").val(),y=$("#areaMax").val();""==k||""==y?console.log("the password is not selected!"):(g.blur(function(){(g.val().length<k||g.val().length>y)&&g.after("<span class='help-block' style='color: #a94442'>长度需要在"+k+"和"+y+"之间!</span>")}),g.focus(function(){g.next("span").remove()})),b.mouseenter(function(){o(b)}),b.mouseleave(function(){s(b)})}$("#form-name-input").val("")}function o(e){var a=parseInt(e.css("height"));e.css("backgroundColor","#eee"),e.css("cursor","pointer"),e.append("<span class='delete'> 删除 </span>");var n=$(".delete");n.css("padding-top",(a-20)/2+"px"),e.on("click",".delete",function(){console.log("点击了删除按钮!"),n.parent().slideUp(function(){$(this).remove()})})}function s(e){e.css("backgroundColor","#fff"),e.css("cursor","default"),e.children(".delete").remove()}function l(){return $("#must").prop("checked")?!0:!1}function c(e){$("#cellphone").prop("checked")?d(e):$("#mailbox").prop("checked")?f(e):$("#password").prop("checked")&&p(e),l()&&i(e),e.on("focus",function(){t(e)})}function t(e){e.parent().parent().attr("class","form-group"),e.parent().children("span").remove()}function r(e){e.parent().parent().attr("class","form-group has-success has-feedback"),e.after("<span class='sr-only'>(success)</span>").after("<span class='glyphicon glyphicon-ok form-control-feedback' ></span>")}function i(e){e.on("blur",function(){""==e.val()&&(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>该项不能为空,请重新输入!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>"))})}function p(e){var a=$("#areaMin").val(),n=$("#areaMax").val();e.blur(function(){""!=e.val()&&(e.val().length>n||e.val().length<a?(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>长度区间需在"+a+"到"+n+"之间!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>")):r(e))})}function d(e){var a=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/;e.blur(function(){""!=e.val()&&(a.test(e.val())?r(e):(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>请输入正确的手机号!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>")))})}function f(e){var a=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;e.blur(function(){""!=e.val()&&(""==e.val()?(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>该项不能为空,请重新输入!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>")):a.test(e.val())?r(e):(e.parent().parent().attr("class","form-group has-error has-feedback"),e.after("<span class='help-block'>请输入正确的邮箱格式!</span>").after("<span class='sr-only'>(warning)</span>").after("<span class='glyphicon glyphicon-warning-sign form-control-feedback' ></span>")))})}function u(){var e=document.querySelector(".modal-body"),a=document.createRange();a.selectNode(e),window.getSelection().addRange(a);try{var n=document.execCommand("copy"),o=n?"successful":"unsuccessful";console.log("Copy email command was "+o)}catch(s){console.log("Oops, unable to copy")}window.getSelection().removeAllRanges()}e();var v=[];$("#setSelect").keyup(function(e){if(13==e.keyCode){var n=$("#setSelect").val().trim(),o=n.split(/[^0-9a-zA-Z\u4e00-\u9fa5]+/);v=v.concat(o),console.log(v),a()}}),$("#selectHolder").delegate("button","click",function(){$(this).remove(),v.splice($(this).value,1),console.log(v)}),$("#selectHolder").delegate("button","mouseover",function(){$(this).attr("class","btn btn-danger"),$(this).text("删除")}),$("#selectHolder").delegate("button","mouseleave",function(){$(this).attr("class","btn btn-default"),$(this).text($(this).attr("name"))}),$("#add").click(function(){n()}),$("#finished").click(function(){$(".modal-body").text($("#view-container .container").html()),$("#view-container .container").append("<div class='col-md-4 col-md-offset-4'><button class='btn btn-success' id='createFormCode' data-toggle='modal' data-target='#dialog'>一键生成表单代码</button></div>"),$("#copy").tooltip()}),$(".modal-footer button:last").click(function(){u()})}();